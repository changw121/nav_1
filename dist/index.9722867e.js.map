{"mappings":"AAAA,MAAMA,UAAYC,EAAE,aACdC,QAAUF,UAAUG,KAAK,WACzBC,EAAIC,aAAaC,QAAQ,KACzBC,QAAUC,KAAKC,MAAML,GAErBM,QAAUH,SAAW,CACvB,CAACI,KAAM,IAAKC,IAAK,wBACjB,CAACD,KAAM,IAAKC,IAAK,6BAIfC,YAAeD,GACVA,EAAIE,QAAQ,WAAY,IACpBA,QAAQ,UAAW,IACnBA,QAAQ,OAAQ,IAChBA,QAAO,OAAS,IAEzBC,OAAS,KACXf,UAAUG,KAAK,iBAAiBa,SAChCN,QAAQO,SAAQ,CAACC,EAAMC,KACnB,MAAMC,EAAMnB,EAAE,2EAYMiB,EAAAP,iDACKE,YAAAK,EAAAN,gPAKrBS,aAAUnB,S,EACZoB,GAAA,cACJC,OAAAC,KAAAN,EAAAN,IAAA,IAEEQ,EAAAE,GAAA,kBAAAG,IAENA,EAAYC,kBAGHhB,QAAQiB,OAAOR,EAAI,GAKdJ,QACD,GAEV,GACD,EAGJA,SACAd,EAAA,cAAOqB,GAAA,SAAqB,KACxB,IAAAV,EAAAW,OAAAK,OAAwB,gBACJ,IAApBhB,EAAMiB,QAAS,UAAejB,EAAO,WAAGA,GAAFF,QAAAoB,KAAA,CACtCnB,KAAAE,YAAqBD,GAAK,G,QAG9BG,QAAO,I,OAGHgB,eAAiB,KACjB,MAAIC,EAASxB,KAAEyB,UAAQvB,S","sources":["src/main.js"],"sourcesContent":["const $siteList = $('.siteList')\r\nconst $lastLi = $siteList.find('li.last')\r\nconst x = localStorage.getItem('x')\r\nconst xObject = JSON.parse(x)  \r\n//第一次xObject是空的，所以用||当xObject是空时，取后者的值，当xObject是非空时，取前者的值。\r\nconst hashmap = xObject || [\r\n    {logo: 'A', url: 'https://www.acfun.cn'},\r\n    {logo: 'B', url: 'https://www.bilibili.com'},\r\n]\r\n\r\n//设置链接显示方式\r\nconst simplifyUrl = (url)=>{\r\n    return url.replace('https://', '')\r\n              .replace('http://', '')\r\n              .replace('www.', '')\r\n              .replace(/\\/.*/, '') //删除/开头的内容\r\n}\r\nconst render = ()=>{\r\n    $siteList.find(\"li:not(.last)\").remove() //重新渲染li的时候需要将之前的都删掉\r\n    hashmap.forEach((node, index)=>{\r\n        const $li = $(`<li>\r\n            <div class=\"site\">\r\n                <div class=\"logo\">${node.logo}</div>\r\n                <div class=\"link\">${simplifyUrl(node.url)}</div>\r\n                <div class='close'>\r\n                    <svg class=\"icon\">\r\n                        <use xlink:href=\"#icon-close\"></use>\r\n                    </svg>\r\n                </div>\r\n            </div>\r\n        </li>`).insertBefore($lastLi)\r\n        //用js代替a标签的点击跳转首页\r\n        $li.on('click', ()=>{\r\n            window.open(node.url)\r\n        })\r\n        $li.on('click', '.close',(e)=>{\r\n            e.stopPropagation()  //阻止关闭按钮跳转到首页-阻止冒泡\r\n            hashmap.splice(index, 1)  //从hashmap中找到close的那个并删除\r\n            render()  //删掉后重新渲染hashmap到页面\r\n        })\r\n    })\r\n}\r\nrender()\r\n\r\n$('.addButton')\r\n  .on('click',()=>{\r\n    let url = window.prompt('请问你要添加的网址是啥？')\r\n    if(url.indexOf('http')!==0){\r\n        url = 'https://' + url\r\n    }\r\n    hashmap.push(\r\n        {\r\n            logo: simplifyUrl(url)[0],\r\n            url: url\r\n        }\r\n    )\r\n    render()\r\n});\r\n\r\n//当页面关闭的时候存储hashMap\r\nwindow.onbeforeunload = ()=>{\r\n    // console.log('页面要关闭了')\r\n    const string = JSON.stringify(hashmap)  //将对象变成字符串，由于localStorage只能存字符串\r\n    localStorage.setItem('x', string)  //在本地设置一个值为x的地方存string\r\n}\r\n\r\n// 键盘事件\r\n$(document).on('keypress', (e)=>{\r\n    // const key = e.key\r\n    const {key} = e  //上面的简写形式\r\n    for(let i=0; i<hashmap.length; i++){\r\n        if(hashmap[i].logo.toLowerCase() === key){\r\n            window.open(hashmap[i].url)\r\n        }\r\n    }\r\n})"],"names":["$siteList","$","$lastLi","find","x","localStorage","getItem","xObject","JSON","parse","hashmap","logo","url","simplifyUrl","replace","render","remove","forEach","node","index","$li","insertBefore","on","window","open","e","stopPropagation","splice","prompt","indexOf","push","onbeforeunload","string","stringify"],"version":3,"file":"index.9722867e.js.map"}